---
  # use the new container infrastructure
  sudo: required

  services:
    - docker

  cache: pip

  language: python
  python: "2.7"

  env:
    matrix:
      - OS_TYPE=centos OS_VERSION=7

  before_install:
    - sudo apt-get update
    - echo 'DOCKER_OPTS="-H tcp://127.0.0.1:2375 -H unix:///var/run/docker.sock -s devicemapper"' | sudo tee /etc/default/docker > /dev/null
    - sudo service docker restart
    - sleep 5
    - sudo docker pull centos:centos${OS_VERSION}

  script:
    - sudo bash tests/setup_centos_tests.sh {OS_VERSION}
    # Warp YAML into submission to run clank
#    - >-
#      clank_env/bin/python ./clank.py
#      --env_file variables.yml
#      -x "atmosphere_github_branch=\"${ATMO_GITHUB_BRANCH:-master}\""
#      -x "atmosphere_github_repo=\"${ATMO_GITHUB_REPO:-https://github.com/CyVerse/atmosphere.git}\""
#      -x "troposphere_github_branch=\"${TROPO_GITHUB_BRANCH:-master}\""
#      -x "troposphere_github_repo=\"${TROPO_GITHUB_REPO:-https://github.com/CyVerse/troposphere.git}\""
#      --skip-tags "distro-update,create-nginx-uwsgi,enable-services"
#      -b
